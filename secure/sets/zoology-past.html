<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CEE Zoology Mock Tests & MCQs - CEE Medical Entrance Exam Nepal | CEE Medico Nepal</title>
    <link rel="apple-touch-icon" sizes="180x180" href="/fevicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/fevicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/fevicon/favicon-16x16.png">
    <link rel="manifest" href="/fevicon/site.webmanifest">
    <meta name="description" content="Master CEE Medical Entrance Zoology with free chapter-wise MCQs & full mock tests on CEE Medico Nepal. Aligned with NEB syllabus & NEET-level questions. Start your CEE 2024 Zoology preparation today!">
    <meta name="keywords" content="CEE Nepal,ceemediconepal, zoology mcq, QUIZ cee zoology, Past Questions Cee, Zoology quiz, CEE practice questions, MBBS practice set, medical entrance Nepal, CEE Medico Nepal, CEE Medical Nepal, medical entrance Nepal, ceemediconepal.xyz, chapter-wise quiz CEE, CEE 2081 preparation, NEET-level questions, Zoology MCQs, CEE chapter-wise quiz, CEE preparation, CEE Nepal online mock test, CEE entrance MCQ practice, NEB syllabus entrance questions, MBBS preparation Nepal, BDS entrance Nepal, BSc Nursing entrance questions, Pharmacy entrance questions Nepal, Medical entrance past questions Nepal, CEE model questions Nepal, Medical entrance notes Nepal, free CEE practice tests Nepal, NEET-style questions Nepal, Biology mock test CEE, Online entrance preparation Nepal, CEE self-assessment quiz, medical entrance quiz Nepal, Plus Two Science entrance exam, Zoology class 11 notes Nepal, NEB science MCQs, Free entrance app Nepal, MBBS entrance 2081, BSc Nursing mock test, Medical paramedical exam Nepal, CEE exam tricks, CEE scoring tips, Biology entrance questions, online exams for medical entrance, CEE NEB online MCQs, exam preparation Nepal after 12 science, mock test series CEE Nepal, practice set CEE 2081, Help for Entrance app Nepal, Entrance preparation Nepal science, MBBS mock exam Nepal, online CEE exam simulator, Zoology notes NEB, Zoology quick revision, past papers CEE Nepal, entrance syllabus Nepal, entrance quiz Nepal, helpforentrance, cee practice mcqs 2081, cee 2081 model sets, entrance exams Nepal 2081, cet entrance Nepal, online MBBS prep Nepal, CEE 2024 practice, CEE 2024 mock test">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Global Styles from Physics HTML */
        :root {
            --primary-color: #2563eb;
            --secondary-color: #1d4ed8;
            --accent-color: #dc2626;
            --text-color: #1e293b;
            --light-bg: #f8fafc;
            --white: #ffffff;
            --hover-bg: #e0e7ff;
            --border-color: #e2e8f0;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --transition: all 0.3s ease;
            --gradient-blue: linear-gradient(135deg, #2563eb, #1d4ed8);
            --gradient-purple-blue: linear-gradient(135deg, #6d28d9, #4f46e5);
            --button-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);

            /* Added for quiz feedback */
            --correct-color: #2ecc71; /* Green */
            --incorrect-color: #e74c3c; /* Red */
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--light-bg);
            padding: 0;
            margin: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Main Header Styles from Physics HTML */
        .main-header {
            background: var(--gradient-blue);
            color: white;
            padding: 0.5rem 0;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
        }
        
        .logo {
            display: flex;
            align-items: center;
            text-decoration: none;
            color: white;
        }
        
        .logo img {
            height: 40px;
            margin-right: 10px;
        }
        
        .logo-text {
            display: flex;
            flex-direction: column;
        }
        
        .logo-text h1 {
            font-size: 1.5rem;
            font-weight: 700;
            margin: 0;
            line-height: 1.2;
        }
        
        .logo-text span {
            font-size: 0.8rem;
            opacity: 0.9;
        }
        
        .nav-links {
            display: flex;
            align-items: center;
        }
        
        .nav-links a {
            color: white;
            text-decoration: none;
            margin-left: 1.5rem;
            font-weight: 500;
            font-size: 0.95rem;
            transition: var(--transition);
            padding: 0.5rem 0;
            position: relative;
        }
        
        .nav-links a:hover {
            opacity: 0.9;
        }
        
        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background-color: white;
            transition: var(--transition);
        }
        
        .nav-links a:hover::after {
            width: 100%;
        }
        
        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        .back-to-home {
            display: inline-flex;
            align-items: center;
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 500;
            margin: 1rem 0;
            transition: var(--transition);
        }
        
        .back-to-home i {
            margin-right: 8px;
            transition: var(--transition);
        }
        
        .back-to-home:hover {
            color: var(--secondary-color);
        }
        
        .back-to-home:hover i {
            transform: translateX(-3px);
        }
        
        /* Footer Styles from Physics HTML */
        .main-footer {
            background-color: #111827;
            color: white;
            padding: 3rem 0 1rem;
            margin-top: auto;
        }
        
        .footer-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }
        
        .footer-logo {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .footer-logo img {
            height: 40px;
            margin-right: 10px;
        }
        
        .footer-logo-text h3 {
            font-size: 1.2rem;
            margin: 0;
            line-height: 1.2;
        }
        
        .footer-logo-text span {
            font-size: 0.8rem;
            opacity: 0.7;
        }
        
        .footer-about p {
            opacity: 0.7;
            font-size: 0.9rem;
            line-height: 1.6;
            margin-bottom: 1rem;
        }
        
        .social-links {
            display: flex;
            gap: 1rem;
        }
        
        .social-links a {
            color: white;
            background-color: rgba(255, 255, 255, 0.1);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }
        
        .social-links a:hover {
            background-color: var(--primary-color);
            transform: translateY(-3px);
        }
        
        .footer-links h4 {
            font-size: 1.1rem;
            margin-bottom: 1rem;
            position: relative;
            padding-bottom: 0.5rem;
        }
        
        .footer-links h4::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 40px;
            height: 2px;
            background-color: var(--primary-color);
        }
        
        .footer-links ul {
            list-style: none;
        }
        
        .footer-links li {
            margin-bottom: 0.6rem;
        }
        
        .footer-links a {
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            font-size: 0.9rem;
            transition: var(--transition);
        }
        
        .footer-links a:hover {
            color: white;
            padding-left: 5px;
        }
        
        .footer-contact p {
            display: flex;
            align-items: flex-start;
            margin-bottom: 0.8rem;
            font-size: 0.9rem;
            opacity: 0.7;
        }
        
        .footer-contact i {
            margin-right: 10px;
            color: var(--primary-color);
            font-size: 1rem;
        }
        
        .footer-bottom {
            text-align: center;
            padding-top: 1.5rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .footer-bottom p {
            font-size: 0.8rem;
            opacity: 0.7;
            margin: 0;
        }
        
        /* Responsive adjustments */
        @media (max-width: 992px) {
            .footer-container {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 768px) {
            .mobile-menu-btn {
                display: block;
            }
            
            .nav-links {
                display: none;
                position: absolute;
                top: 100%;
                left: 0;
                width: 100%;
                background-color: var(--secondary-color);
                flex-direction: column;
                padding: 1rem;
                box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
            }
            
            .nav-links.active {
                display: flex;
            }
            
            .nav-links a {
                margin: 0.5rem 0;
                padding: 0.5rem 1rem;
                width: 100%;
            }
            
            .nav-links a::after {
                display: none;
            }
        }
        
        @media (max-width: 576px) {
            .container {
                padding: 15px;
            }
            
            .footer-container {
                grid-template-columns: 1fr;
            }
        }

        /* Quiz Specific Styles */
        .quiz-categories {
            padding: 60px 0;
        }

        .quiz-categories h2 {
            text-align: center;
            margin-bottom: 40px;
            font-size: 2rem;
            color: var(--secondary-color);
        }

        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
        }

        .category-card {
            background-color: var(--white);
            border-radius: 8px;
            padding: 20px;
            box-shadow: var(--shadow);
            transition: var(--transition);
            cursor: pointer;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 150px; /* Ensure cards have a consistent height */
        }

        .category-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .category-card i {
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 15px;
        }

        .category-card h3 {
            margin-bottom: 10px;
            color: var(--secondary-color);
        }

        .category-card p {
            color: var(--text-color);
            font-size: 0.9rem;
        }

        .quiz-container {
            background-color: var(--white);
            border-radius: 10px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin: 40px auto; /* Centered */
            max-width: 800px; /* Max width for quiz container */
        }

        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }

        .quiz-header h2 {
            color: var(--secondary-color);
            font-size: 1.8rem;
        }

        .quiz-progress, .quiz-timer {
            background-color: var(--hover-bg);
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: 500;
            color: var(--primary-color);
        }

        .quiz-timer {
            color: var(--accent-color);
        }

        .question-container {
            margin-bottom: 30px;
        }

        .question-container p {
            font-size: 1.2rem;
            font-weight: 500;
            color: var(--text-color);
        }

        .options-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 30px;
        }

        .option {
            background-color: var(--light-bg);
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            border: 1px solid var(--border-color);
            font-size: 1rem;
            color: var(--text-color);
        }

        .option:hover:not(.correct):not(.incorrect) {
            background-color: var(--hover-bg);
            border-color: var(--primary-color);
        }

        .option.selected {
            background-color: rgba(37, 99, 235, 0.1);
            border-color: var(--primary-color);
            color: var(--primary-color);
        }

        .option.correct {
            background-color: rgba(46, 204, 113, 0.1); /* Light green */
            border-color: var(--correct-color);
            color: var(--correct-color);
            font-weight: 600;
        }

        .option.incorrect {
            background-color: rgba(231, 76, 60, 0.1); /* Light red */
            border-color: var(--incorrect-color);
            color: var(--incorrect-color);
            font-weight: 600;
        }

        .explanation-text {
            margin-top: 15px;
            padding: 15px;
            background-color: #f0f4f8; /* A light grey-blue background */
            border-left: 5px solid var(--primary-color);
            border-radius: 5px;
            font-size: 0.95rem;
            color: var(--text-color);
            display: none; /* Hidden by default */
        }

        .quiz-navigation {
            display: flex;
            justify-content: space-between;
            gap: 10px;
        }

        .quiz-navigation button {
            padding: 12px 25px;
            border-radius: 8px;
            font-weight: 600;
            border: none;
            transition: var(--transition);
            box-shadow: var(--shadow);
        }

        #prev-btn {
            background-color: var(--light-bg);
            color: var(--text-color);
            border: 1px solid var(--border-color);
        }

        #prev-btn:hover {
            background-color: #e2e8f0;
        }

        #next-btn, #submit-btn {
            background: var(--gradient-blue);
            color: var(--white);
        }

        #next-btn:hover, #submit-btn:hover {
            background: var(--gradient-purple-blue);
        }

        /* Results Container */
        .results-container {
            background-color: var(--white);
            border-radius: 10px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin: 40px auto;
            text-align: center;
            max-width: 800px;
        }

        .score-container {
            margin-bottom: 30px;
        }

        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: conic-gradient(var(--primary-color) 0%, var(--light-bg) 0%);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            position: relative;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.1);
        }

        .score-circle::before {
            content: '';
            position: absolute;
            width: 120px;
            height: 120px;
            background-color: var(--white);
            border-radius: 50%;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }

        #score-percentage {
            position: relative;
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--primary-color);
        }

        .result-details {
            text-align: left;
            margin-bottom: 30px;
        }

        .result-item {
            padding: 15px;
            border-bottom: 1px solid #eee;
            margin-bottom: 10px;
            border-radius: 8px;
        }

        .result-item.correct {
            background-color: rgba(46, 204, 113, 0.05); /* Very light green */
            border-left: 5px solid var(--correct-color);
        }

        .result-item.incorrect {
            background-color: rgba(231, 76, 60, 0.05); /* Very light red */
            border-left: 5px solid var(--incorrect-color);
        }

        .result-question {
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-color);
        }

        .result-answer {
            font-size: 0.95rem;
            color: var(--text-color);
            margin-bottom: 5px;
        }

        .result-answer.correct-option {
            color: var(--correct-color);
            font-weight: 500;
        }

        .result-answer.incorrect-option {
            color: var(--incorrect-color);
            font-weight: 500;
        }

        .results-container button {
            padding: 12px 25px;
            border-radius: 8px;
            font-weight: 600;
            margin: 0 10px;
            border: none;
            transition: var(--transition);
            box-shadow: var(--shadow);
        }

        #retake-btn {
            background: var(--gradient-blue);
            color: var(--white);
        }

        #retake-btn:hover {
            background: var(--gradient-purple-blue);
        }

        #choose-another-btn {
            background-color: var(--light-bg);
            color: var(--text-color);
            border: 1px solid var(--border-color);
        }

        #choose-another-btn:hover {
            background-color: #e2e8f0;
        }

        #logoutBtn {
            padding: 8px 15px;
            background: #ff4444;
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s;
        }

        #logoutBtn:hover {
            background: #cc0000;
        }

        /* Responsive Styles */
        @media (max-width: 768px) {
            .quiz-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }

            .quiz-progress, .quiz-timer {
                align-self: flex-start;
            }

            .quiz-navigation {
                flex-direction: column;
            }

            .quiz-navigation button {
                width: 100%;
            }

            .results-container button {
                width: 100%;
                margin: 10px 0;
            }
        }
        @media (max-width: 480px) {
            .quiz-header h2 {
                font-size: 1.5rem;
            }
            .question-container p {
                font-size: 1rem;
            }
            .option {
                padding: 12px;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <!-- Main Header -->
    <header class="main-header">
        <div class="header-container">
            <a href="index.html" class="logo">
                <img src="https://placehold.co/40x40/2563eb/ffffff?text=Logo" alt="CEE Medico Nepal Logo">
                <div class="logo-text">
                    <h1>CEE Medico Nepal</h1>
                    <span>Your Medical Entrance Guide</span>
                </div>
            </a>
            
            <button class="mobile-menu-btn" id="mobileMenuBtn">
                <i class="fas fa-bars"></i>
            </button>
            
            <nav class="nav-links" id="navLinks">
                <a href="index.html">Home</a>
                <a href="about.html">About</a>
                <a href="#courses.html">Courses</a>
                <button id="logoutBtn">Logout</button>
                <a href="contact.html">Contact</a>
            </nav>
        </div>
    </header>
    
    <main class="container" id="main-content">
        <a href="index.html" class="back-to-home">
            <i class="fas fa-arrow-left"></i> Back to Home
        </a>
        
        <section class="quiz-categories">
            <h2>Zoology Quiz Categories</h2>
            <div class="category-grid" id="category-container">
                <!-- Categories will be loaded dynamically from JSON files -->
            </div>
        </section>

        <section class="quiz-container" id="quiz-section" style="display: none;">
            <div class="quiz-header">
                <h2 id="quiz-title">Quiz Title</h2>
                <div class="quiz-progress">
                    <span id="current-question">1</span> of <span id="total-questions">10</span>
                </div>
                <div class="quiz-timer">
                    <i class="fas fa-clock"></i> <span id="time">00:00</span>
                </div>
            </div>
            
            <div class="quiz-body">
                <div class="question-container">
                    <p id="question-text">Question text goes here...</p>
                </div>
                <div class="options-container" id="options-container">
                    <!-- Options will be loaded dynamically -->
                </div>
                <div class="explanation-text" id="explanation-text" style="display: none;"></div>
                <div class="quiz-navigation">
                    <button id="prev-btn" disabled><i class="fas fa-arrow-left"></i> Previous</button>
                    <button id="next-btn">Next <i class="fas fa-arrow-right"></i></button>
                    <button id="submit-btn" style="display: none;">Submit Quiz</button>
                </div>
            </div>
        </section>

        <section class="results-container" id="results-section" style="display: none;">
            <h2>Quiz Results</h2>
            <div class="score-container">
                <div class="score-circle">
                    <span id="score-percentage">0%</span>
                </div>
                <p>You scored <span id="correct-answers">0</span> out of <span id="total-questions-result">0</span></p>
            </div>
            <div class="result-details" id="result-details">
                <!-- Result details will be loaded here -->
            </div>
            <button id="retake-btn">Retake Quiz</button>
            <button id="choose-another-btn">Choose Another Quiz</button>
        </section>
    </main>

    <!-- Main Footer -->
    <footer class="main-footer">
        <div class="container">
            <div class="footer-container">
                <div class="footer-about">
                    <div class="footer-logo">
                        <img src="https://placehold.co/40x40/2563eb/ffffff?text=Logo" alt="CEE Medico Nepal Logo">
                        <div class="footer-logo-text">
                            <h3>CEE Medico Nepal</h3>
                            <span>Your Medical Entrance Guide</span>
                        </div>
                    </div>
                    <p>We provide comprehensive resources and guidance for medical entrance exam preparation in Nepal.</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-youtube"></i></a>
                        <a href="#"><i class="fab fa-tiktok"></i></a>
                    </div>
                </div>
                
                <div class="footer-links">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="/index.html">Home</a></li>
                        <li><a href="/about.html">About Us</a></li>
                        <li><a href="/quiz/index.html">Live Quiz</a></li>
                        <li><a href="#footer-links">Resources</a></li>
                        <li><a href="/Blog/blog.html">Blog</a></li>
                    </ul>
                </div>
                
                <div class="footer-links">
                    <h4>Resources</h4>
                    <ul>
                        <li><a href="physics.html">Physics</a></li>
                        <li><a href="chemistry.html">Chemistry</a></li>
                        <li><a href="zoology.html">Zoology</a></li>
                        <li><a href="botany.html">Botany</a></li>
                        <li><a href="mat.html">Mat</a></li>
                        <li><a href="/secure/protected.html">Premium</a></li>
                    </ul>
                </div>
                
                <div class="footer-contact">
                    <h4>Contact Us</h4>
                    <p><i class="fas fa-map-marker-alt"></i> Kathmandu, Nepal</p>
                    <p><i class="fas fa-phone-alt"></i> +977 9812240229</p>
                    <p><i class="fas fa-envelope"></i>ceemediconepal.xyz</p>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2025 CEE Medico Nepal. All Rights Reserved.</p>
            </div>
        </div>
    </footer>

    <script type="module">
        // Firebase imports
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.8.1/firebase-app.js";
        import { getAuth, onAuthStateChanged, signOut, signInWithCustomToken, signInAnonymously } from "https://www.gstatic.com/firebasejs/11.8.1/firebase-auth.js";

        // Firebase config - MANDATORY: Use __firebase_config global variable
        const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        // Auth state listener
        onAuthStateChanged(auth, async (user) => {
            if (user) {
                // User is signed in, display the page
                document.body.style.display = "block";
            } else {
                // No user is signed in, try to sign in with custom token or anonymously
                const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;
                try {
                    if (initialAuthToken) {
                        await signInWithCustomToken(auth, initialAuthToken);
                    } else {
                        await signInAnonymously(auth);
                    }
                    document.body.style.display = "block"; // Display page after successful sign-in
                } catch (error) {
                    console.error("Authentication error:", error);
                    // Optionally redirect to a login page if anonymous sign-in is not desired or fails
                    // window.location.href = "login.html";
                }
            }
        });

        // Logout functionality
        document.getElementById("logoutBtn").addEventListener("click", () => {
            signOut(auth).then(() => {
                // Redirect to login page or home page after logout
                window.location.href = "index.html"; // Or "login.html" if you have one
            }).catch((error) => {
                console.error("Logout error:", error);
            });
        });

        // DOM Elements
        const categoryContainer = document.getElementById('category-container');
        const quizSection = document.getElementById('quiz-section');
        const resultsSection = document.getElementById('results-section');
        const quizTitle = document.getElementById('quiz-title');
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const currentQuestionSpan = document.getElementById('current-question'); // Renamed to avoid conflict
        const totalQuestionsSpan = document.getElementById('total-questions'); // Renamed to avoid conflict
        const timeDisplay = document.getElementById('time');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const submitBtn = document.getElementById('submit-btn');
        const scorePercentage = document.getElementById('score-percentage');
        const correctAnswersSpan = document.getElementById('correct-answers'); // Renamed to avoid conflict
        const totalQuestionsResultSpan = document.getElementById('total-questions-result'); // Renamed to avoid conflict
        const resultDetails = document.getElementById('result-details');
        const retakeBtn = document.getElementById('retake-btn');
        const chooseAnotherBtn = document.getElementById('choose-another-btn');
        const explanationText = document.getElementById('explanation-text');

        // Quiz Variables
        let quizzes = {};
        let currentQuiz = null;
        let currentQuestionIndex = 0;
        let userAnswers = [];
        let score = 0;
        let timer = null;
        let seconds = 0;
        let answeredCurrentQuestion = false; // To track if the current question has been answered

        // Mobile Menu Toggle
        const mobileMenuBtn = document.getElementById('mobileMenuBtn');
        const navLinks = document.getElementById('navLinks');
        
        mobileMenuBtn.addEventListener('click', function() {
            navLinks.classList.toggle('active');
        });
        
        // Load Quiz Categories from JSON files
        function loadQuizCategories() {
            const quizFiles = [
                { name: 'Human Diseases', file: 'Human diseases entrance past questions.docx' },
                { name: 'Phylum Important Points', file: 'Phylum important points.docx' },
                { name: 'Origin and Evolution of Life', file: 'Origin and evolution of life entrance past questions.docx' },
                { name: 'Frog', file: 'Frog entrance past questions.docx' },
                { name: 'Cardiovascular System', file: 'Cardivascular system Entrance past questions.docx' },
                { name: 'Earthworm', file: 'Earthworm entrance past questions.docx' },
                { name: 'Excretory System', file: 'Excretory system entrance past questions.docx' },
                { name: 'Reproductive System', file: 'Reproductive system entrance past questions.docx' },
                { name: 'Skeletal System', file: 'Skeletal system entrance past questions.docx' },
                { name: 'Sense Organ', file: 'Sense organ entrance past questions.docx' },
                { name: 'Embryonic Development', file: 'Embryonic development of animals.docx' },
                { name: 'Respiratory System', file: 'Respiratory system entrance past questions.docx' },
                { name: 'Endocrine System', file: 'Endocrine system entrance past questions.docx' },
                { name: 'Plasmodium and Paramecium', file: 'Plasmodium and Paramecium past questions.docx' }
            ];
            
            categoryContainer.innerHTML = ''; // Clear existing categories
            quizFiles.forEach(quiz => {
                const categoryCard = document.createElement('div');
                categoryCard.className = 'category-card';
                categoryCard.innerHTML = `
                    <i class="fas fa-dna"></i> <!-- Generic icon for Zoology -->
                    <h3>${quiz.name}</h3>
                    <p>Test your knowledge of ${quiz.name.toLowerCase()}</p>
                `;
                
                categoryCard.addEventListener('click', () => {
                    startQuiz(quiz.name, quiz.file);
                });
                
                categoryContainer.appendChild(categoryCard);
            });
        }
        
        // Start Quiz
        function startQuiz(quizName, quizFile) {
            loadQuizData(quizName, quizFile);
            
            document.querySelector('.quiz-categories').style.display = 'none';
            quizSection.style.display = 'block';
            resultsSection.style.display = 'none';
            
            quizSection.scrollIntoView({ behavior: 'smooth' });
        }
        
        // Load quiz data from text file
        async function loadQuizData(quizName, quizFile) {
            try {
                // Use content_fetcher to get file content
                const payload = {
                    query: quizFile,
                    source_references: [{ id: `uploaded:${quizFile}`, type: 'uploaded file' }]
                };
                const response = await fetch('https://content-fetcher.google-genai.com/v1/fetch', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`Failed to load quiz data: ${response.statusText}`);
                }
                const result = await response.json();
                const textData = result.fullText; // Assuming fullText contains the JSON string
                
                // Parse the text data as JSON
                let quizData;
                try {
                    // Attempt to extract JSON array if the text contains additional info
                    const jsonMatch = textData.match(/\[\s*\{[\s\S]*\}\s*\]/);
                    if (jsonMatch) {
                        quizData = JSON.parse(jsonMatch[0]);
                    } else {
                        quizData = JSON.parse(textData);
                    }
                } catch (e) {
                    console.error('Error parsing quiz data:', e);
                    alert('Error loading quiz data. Please check the file format.');
                    return;
                }
                
                currentQuiz = {
                    name: quizName,
                    questions: quizData
                };
                
                currentQuestionIndex = 0;
                userAnswers = new Array(quizData.length).fill(null);
                score = 0;
                seconds = 0;
                answeredCurrentQuestion = false; // Reset for new quiz
                
                startTimer();
                displayQuestion();
            } catch (error) {
                console.error('Error loading quiz data:', error);
                alert('Failed to load quiz data. Please try again.');
            }
        }
        
        // Display current question
        function displayQuestion() {
            if (!currentQuiz || currentQuestionIndex >= currentQuiz.questions.length) return;
            
            const question = currentQuiz.questions[currentQuestionIndex];
            
            quizTitle.textContent = currentQuiz.name;
            currentQuestionSpan.textContent = currentQuestionIndex + 1;
            totalQuestionsSpan.textContent = currentQuiz.questions.length;
            
            questionText.textContent = question.question;
            
            optionsContainer.innerHTML = '';
            explanationText.style.display = 'none'; // Hide explanation by default

            // Reset answered state for the new question
            answeredCurrentQuestion = userAnswers[currentQuestionIndex] !== null;

            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.textContent = option;
                optionElement.dataset.index = index; // Store index for easy access

                if (answeredCurrentQuestion) {
                    // If already answered, show correct/incorrect colors
                    if (index === question.correct) {
                        optionElement.classList.add('correct');
                    } else if (index === userAnswers[currentQuestionIndex]) {
                        optionElement.classList.add('incorrect');
                    }
                    optionElement.style.pointerEvents = 'none'; // Disable clicking after answer
                    explanationText.textContent = `Explanation: ${question.explanation}`;
                    explanationText.style.display = 'block';
                } else {
                    optionElement.addEventListener('click', () => selectOption(index));
                }

                optionsContainer.appendChild(optionElement);
            });
            
            prevBtn.disabled = currentQuestionIndex === 0;
            nextBtn.style.display = currentQuestionIndex < currentQuiz.questions.length - 1 ? 'block' : 'none';
            submitBtn.style.display = currentQuestionIndex === currentQuiz.questions.length - 1 ? 'block' : 'none';
        }
        
        // Select an option
        function selectOption(optionIndex) {
            if (answeredCurrentQuestion) return; // Prevent re-answering

            const question = currentQuiz.questions[currentQuestionIndex];
            userAnswers[currentQuestionIndex] = optionIndex;
            answeredCurrentQuestion = true;

            const options = optionsContainer.querySelectorAll('.option');
            options.forEach((option, index) => {
                option.style.pointerEvents = 'none'; // Disable further clicks
                if (index === question.correct) {
                    option.classList.add('correct');
                } else if (index === optionIndex) {
                    option.classList.add('incorrect');
                }
            });

            // Display explanation
            explanationText.textContent = `Explanation: ${question.explanation}`;
            explanationText.style.display = 'block';
        }
        
        // Navigate to previous question
        prevBtn.addEventListener('click', () => {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                answeredCurrentQuestion = userAnswers[currentQuestionIndex] !== null; // Update answered state
                displayQuestion();
            }
        });
        
        // Navigate to next question
        nextBtn.addEventListener('click', () => {
            if (currentQuestionIndex < currentQuiz.questions.length - 1) {
                currentQuestionIndex++;
                answeredCurrentQuestion = userAnswers[currentQuestionIndex] !== null; // Update answered state
                displayQuestion();
            }
        });
        
        // Submit quiz
        submitBtn.addEventListener('click', () => {
            submitQuiz();
        });
        
        // Calculate and display results
        function submitQuiz() {
            stopTimer();
            
            score = 0;
            currentQuiz.questions.forEach((question, index) => {
                if (userAnswers[index] === question.correct) {
                    score++;
                }
            });
            
            showResults();
        }
        
        // Show results
        function showResults() {
            quizSection.style.display = 'none';
            resultsSection.style.display = 'block';
            
            const percentage = Math.round((score / currentQuiz.questions.length) * 100);
            
            scorePercentage.textContent = `${percentage}%`;
            correctAnswersSpan.textContent = score;
            totalQuestionsResultSpan.textContent = currentQuiz.questions.length;
            
            const scoreCircle = document.querySelector('.score-circle');
            scoreCircle.style.background = `conic-gradient(var(--primary-color) ${percentage}%, var(--light-bg) ${percentage}%)`;
            
            resultDetails.innerHTML = '';
            currentQuiz.questions.forEach((question, index) => {
                const isCorrect = userAnswers[index] === question.correct;
                const resultItem = document.createElement('div');
                resultItem.className = `result-item ${isCorrect ? 'correct' : 'incorrect'}`;
                
                const resultQuestion = document.createElement('div');
                resultQuestion.className = 'result-question';
                resultQuestion.textContent = `${index + 1}. ${question.question}`;
                
                const userAnswerText = document.createElement('div');
                userAnswerText.className = `result-answer ${isCorrect ? 'correct-option' : 'incorrect-option'}`;
                userAnswerText.textContent = `Your answer: ${question.options[userAnswers[index]] || 'Not answered'}`;
                
                const correctAnswerText = document.createElement('div');
                correctAnswerText.className = 'result-answer correct-option';
                correctAnswerText.textContent = `Correct answer: ${question.options[question.correct]}`;
                
                const explanationDiv = document.createElement('div');
                explanationDiv.className = 'result-answer';
                explanationDiv.textContent = `Explanation: ${question.explanation}`;
                
                resultItem.appendChild(resultQuestion);
                resultItem.appendChild(userAnswerText);
                if (!isCorrect) {
                    resultItem.appendChild(correctAnswerText);
                }
                resultItem.appendChild(explanationDiv);
                
                resultDetails.appendChild(resultItem);
            });
            
            resultsSection.scrollIntoView({ behavior: 'smooth' });
        }
        
        // Retake quiz
        retakeBtn.addEventListener('click', () => {
            currentQuestionIndex = 0;
            userAnswers = new Array(currentQuiz.questions.length).fill(null);
            score = 0;
            seconds = 0;
            answeredCurrentQuestion = false; // Reset for retake
            
            quizSection.style.display = 'block';
            resultsSection.style.display = 'none';
            
            startTimer();
            displayQuestion();
        });
        
        // Choose another quiz
        chooseAnotherBtn.addEventListener('click', () => {
            document.querySelector('.quiz-categories').style.display = 'block';
            quizSection.style.display = 'none';
            resultsSection.style.display = 'none';
            
            document.querySelector('.quiz-categories').scrollIntoView({ behavior: 'smooth' });
        });
        
        // Timer functions
        function startTimer() {
            stopTimer();
            updateTimerDisplay();
            timer = setInterval(() => {
                seconds++;
                updateTimerDisplay();
            }, 1000);
        }
        
        function stopTimer() {
            if (timer) {
                clearInterval(timer);
                timer = null;
            }
        }
        
        function updateTimerDisplay() {
            const minutes = Math.floor(seconds / 60);
            const remainingSeconds = seconds % 60;
            timeDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${remainingSeconds.toString().padStart(2, '0')}`;
        }
        
        // Initialize the page
        loadQuizCategories();
    </script>
</body>
</html>
