<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Results | CEE-Medico Nepal</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" href="assets/favicon.ico">
</head>
<body>
    <div class="quiz-wrapper">
        <!-- Header Section -->
        <header class="quiz-header">
            <div class="header-container">
                <div class="logo-container">
                    <img src="assets/logo.png" alt="CEE-Medico Nepal Logo" class="logo">
                    <h1>CEE-Medico Nepal</h1>
                </div>
                <button class="mobile-menu-btn" aria-label="Menu">
                    <i class="fas fa-bars"></i>
                </button>
                <nav class="header-nav">
                    <a href="https://ceemediconepal.xyz">Home</a>
                    <a href="https://ceemediconepal.xyz/about-us/">About</a>
                    <a href="https://ceemediconepal.xyz/courses/">Courses</a>
                    <a href="https://ceemediconepal.xyz/contact-us/">Contact</a>
                </nav>
            </div>
        </header>

        <!-- Results Content -->
        <main class="results-container">
            <div class="results-card">
                <div class="results-header">
                    <h2>Quiz Results</h2>
                    <p>Thank you for completing the assessment, <span id="result-name">Participant</span>!</p>
                </div>
                
                <div class="score-display">
                    <div class="score-circle">
                        <svg class="progress-ring" width="120" height="120">
                            <circle class="progress-ring-circle" stroke="#e0e0e0" stroke-width="8" fill="transparent" r="52" cx="60" cy="60"/>
                            <circle class="progress-ring-circle progress-ring-progress" stroke="#3498db" stroke-width="8" fill="transparent" r="52" cx="60" cy="60" stroke-dasharray="326.56" stroke-dashoffset="326.56"/>
                        </svg>
                        <div class="score-percent" id="score-percent">0%</div>
                    </div>
                    
                    <div class="score-details">
                        <div class="score-detail">
                            <span class="detail-label">Correct Answers:</span>
                            <span class="detail-value" id="correct-answers">0</span>
                        </div>
                        <div class="score-detail">
                            <span class="detail-label">Total Questions:</span>
                            <span class="detail-value" id="total-questions">0</span>
                        </div>
                        <div class="score-detail">
                            <span class="detail-label">Performance:</span>
                            <span class="detail-value" id="performance">Needs Improvement</span>
                        </div>
                    </div>
                </div>
                
                <div class="results-feedback">
                    <h3>Your Performance Analysis</h3>
                    <p id="feedback-text">Based on your results, we recommend reviewing the following areas:</p>
                    
                    <div class="recommendations" id="recommendations">
                        <!-- Will be populated by JavaScript -->
                    </div>
                </div>
                
                <div class="results-actions">
                    <a href="index.html" class="btn btn-primary">
                        <i class="fas fa-redo"></i> Retake Quiz
                    </a>
                    <a href="https://ceemediconepal.xyz/courses/" class="btn btn-secondary">
                        <i class="fas fa-book-medical"></i> Browse Courses
                    </a>
                </div>
            </div>
        </main>

        <!-- Footer Section -->
        <footer class="quiz-footer">
            <div class="footer-container">
                <div class="footer-section">
                    <h3>CEE-Medico Nepal</h3>
                    <p>Advancing medical education through innovative learning solutions.</p>
                </div>
                <div class="footer-section">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="https://ceemediconepal.xyz">Home</a></li>
                        <li><a href="https://ceemediconepal.xyz/courses/">Courses</a></li>
                        <li><a href="https://ceemediconepal.xyz/blog/">Blog</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Connect</h3>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2023 CEE-Medico Nepal. All rights reserved.</p>
            </div>
        </footer>
    </div>

    <script>
        // Mobile menu toggle
        document.querySelector('.mobile-menu-btn').addEventListener('click', () => {
            document.querySelector('.header-nav').classList.toggle('active');
        });

        // Get results from URL parameters
        const urlParams = new URLSearchParams(window.location.search);
        const score = parseInt(urlParams.get('score')) || 0;
        const total = parseInt(urlParams.get('total')) || 1;
        const name = decodeURIComponent(urlParams.get('name') || 'Participant');
        
        // Calculate percentage
        const percentage = Math.round((score / total) * 100);
        
        // Display results
        document.getElementById('result-name').textContent = name;
        document.getElementById('correct-answers').textContent = score;
        document.getElementById('total-questions').textContent = total;
        document.getElementById('score-percent').textContent = `${percentage}%`;
        
        // Set performance evaluation
        const performanceElement = document.getElementById('performance');
        const feedbackElement = document.getElementById('feedback-text');
        const recommendationsElement = document.getElementById('recommendations');
        
        if (percentage >= 90) {
            performanceElement.textContent = "Excellent";
            performanceElement.style.color = "var(--success)";
            feedbackElement.textContent = "Outstanding performance! You have demonstrated exceptional medical knowledge.";
        } else if (percentage >= 75) {
            performanceElement.textContent = "Very Good";
            performanceElement.style.color = "#2ecc71";
            feedbackElement.textContent = "Strong performance! You have a solid foundation in medical knowledge with some areas to polish.";
        } else if (percentage >= 60) {
            performanceElement.textContent = "Good";
            performanceElement.style.color = "var(--warning)";
            feedbackElement.textContent = "Good attempt! With some additional study, you'll improve significantly.";
        } else if (percentage >= 40) {
            performanceElement.textContent = "Fair";
            performanceElement.style.color = "#e67e22";
            feedbackElement.textContent = "You have some foundational knowledge, but significant improvement is needed.";
        } else {
            performanceElement.textContent = "Needs Improvement";
            performanceElement.style.color = "var(--accent)";
            feedbackElement.textContent = "Consider reviewing core medical concepts to strengthen your knowledge base.";
        }
        
        // Generate recommendations (in a real app, these would be based on actual missed questions)
        const recommendations = [
            "Basic anatomy and physiology",
            "Common clinical presentations",
            "Pharmacology fundamentals",
            "Medical terminology"
        ];
        
        recommendations.forEach(rec => {
            const item = document.createElement('div');
            item.className = 'recommendation-item';
            item.innerHTML = `<i class="fas fa-book"></i> ${rec}`;
            recommendationsElement.appendChild(item);
        });
        
        // Animate the progress circle
        const circle = document.querySelector('.progress-ring-progress');
        const radius = circle.r.baseVal.value;
        const circumference = 2 * Math.PI * radius;
        const offset = circumference - (percentage / 100) * circumference;
        
        circle.style.strokeDasharray = `${circumference} ${circumference}`;
        circle.style.strokeDashoffset = circumference;
        
        setTimeout(() => {
            circle.style.transition = 'stroke-dashoffset 1.5s ease-in-out';
            circle.style.strokeDashoffset = offset;
        }, 100);
    </script>
</body>
</html>
