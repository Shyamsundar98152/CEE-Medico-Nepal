<!DOCTYPE html>
<html lang="en">
<head>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3108357597736981"
     crossorigin="anonymous"></script>

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4487133747169097"
     crossorigin="anonymous"></script>
    <meta name="description" content="Best MBBS entrance preparation resources for CEE Nepal. Practice MCQs, mock tests, notes, and subject-wise questions for Chemistry, Physics, Botany, and Zoology.">
<meta name="keywords" content="CEE Nepal, MBBS Entrance,Chapter-wise mcq,cee mcq,ceemediconepal chapter wise, MBBS Nepal,AC-circuits, Medical Entrance Nepal, CEE MCQs, MBBS MCQs, CEE Mock Tests, CEE Chemistry, CEE Physics, CEE Botany, CEE Zoology, CEE MAT, MBBS Practice Questions, ceemediconepal, Nepal Medical Council, CEE 2081, CEE Syllabus, CEE Preparation, CEE Model Questions">
<meta name="robots" content="index, follow">

<link rel="apple-touch-icon" sizes="180x180" href="/fevicon/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/fevicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/fevicon/favicon-16x16.png">
<link rel="manifest" href="/fevicon/site.webmanifest">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>CEE Medico chapter-wise Quiz</title>
  <style>
    /* Base Styles */
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; /* Modern font */
      margin: 0;
      background: #f8f8f8; /* Lighter background */
      line-height: 1.6;
      color: #333; /* Darker text for readability */
    }
    header, footer {
      background-color: #003366;
      color: white;
      padding: 15px 20px; /* Increased padding */
      text-align: center;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1); /* Subtle shadow */
    }
    h1 {
      margin: 0;
      font-size: 2em; /* Larger heading */
    }
    nav {
      display: flex;
      justify-content: center;
      gap: 20px; /* Increased gap */
      margin-top: 10px;
      flex-wrap: wrap;
    }
    nav a {
      color: white;
      text-decoration: none;
      font-weight: bold;
      padding: 8px 15px; /* More padding for links */
      border-radius: 5px; /* Rounded corners for links */
      transition: background-color 0.3s ease; /* Smooth transition */
    }
    nav a:hover {
      background-color: #004488; /* Darker on hover */
    }
    main {
      max-width: 900px; /* Increased max-width */
      margin: 25px auto; /* Increased margin */
      background: white;
      padding: 30px; /* Increased padding */
      border-radius: 12px; /* More rounded corners */
      box-shadow: 0 4px 15px rgba(0,0,0,0.1); /* More prominent shadow */
    }
    h2 {
      text-align: center;
      color: #003366;
      margin-bottom: 25px; /* Increased margin */
      font-size: 1.8em;
    }
    input[type="text"], button {
      padding: 12px; /* Increased padding */
      margin: 8px 0; /* Adjusted margin */
      width: calc(100% - 24px); /* Account for padding */
      box-sizing: border-box;
      border: 1px solid #ccc; /* Lighter border */
      border-radius: 8px; /* Rounded corners */
      font-size: 1em; /* Consistent font size */
    }
    button {
      background-color: #0056b3;
      color: white;
      cursor: pointer;
      border: none;
      transition: background-color 0.3s ease;
    }
    button:hover {
      background-color: #004494;
    }
    button:disabled {
      background-color: #cccccc;
      cursor: not-allowed;
    }
    .option-btn {
      display: block;
      padding: 15px; /* More padding for options */
      margin: 8px 0;
      background-color: #e0f2f7; /* Light blue background for options */
      border: 1px solid #b3e5fc; /* Slightly darker blue border for options */
      cursor: pointer;
      text-align: left;
      width: 100%;
      box-sizing: border-box;
      border-radius: 8px;
      transition: background-color 0.2s ease, border-color 0.2s ease;
      font-size: 1.1em; /* Slightly larger text for options */
      color: #003366; /* Dark blue text for options */
    }
    .option-btn:hover {
      background-color: #b3e5fc; /* Darker blue on hover */
      border-color: #81d4fa; /* Even darker blue border on hover */
    }
    .hidden {
      display: none;
    }
    #explanation {
      margin-top: 15px;
      font-weight: bold;
      text-align: center;
      padding: 10px;
      border-radius: 8px;
    }
    #explanation.correct {
      color: #1a7d3b; /* Darker green */
      background-color: #e6ffe6; /* Light green background */
    }
    #explanation.incorrect {
      color: #b30000; /* Darker red */
      background-color: #ffe6e6; /* Light red background */
    }
    #question-num {
      font-size: 1.2em;
      font-weight: bold;
      margin-bottom: 10px;
      color: #555;
    }
    #question-text {
      font-size: 1.3em;
      margin-bottom: 20px;
      color: #222;
      font-weight: 500;
    }
    #quiz-results {
        margin-top: 20px;
        padding: 20px;
        background-color: #f0f8ff;
        border: 1px solid #cceeff;
        border-radius: 10px;
        text-align: center;
        font-size: 1.2em;
        font-weight: bold;
        color: #003366;
    }
    #quiz-results p {
        margin: 10px 0;
    }
    #quiz-results .score-correct {
        color: #1a7d3b;
    }
    #quiz-results .score-wrong {
        color: #b30000;
    }
    .navigation-buttons {
      display: flex;
      justify-content: space-between;
      margin-top: 20px;
      gap: 10px; /* Space between buttons */
    }
    .navigation-buttons button {
      flex: 1; /* Distribute space evenly */
      width: auto; /* Override default button width */
    }
    #countdown-timer {
        font-size: 1.5em;
        font-weight: bold;
        color: #d32f2f; /* Red color for timer */
        text-align: center;
        margin-bottom: 15px;
    }
    footer p {
      margin: 0;
      padding: 10px 0;
    }

    /* Responsive Adjustments (Media Queries) */
    @media (max-width: 768px) {
      h1 { font-size: 1.8em; }
      h2 { font-size: 1.5em; }
      main { margin: 15px; padding: 20px; }
      nav { flex-direction: column; gap: 8px; }
      nav a { padding: 10px; border-bottom: 1px solid rgba(255,255,255,0.15); }
      nav a:last-child { border-bottom: none; }
      input[type="text"], button, .option-btn { padding: 10px; font-size: 0.95em; }
      .option-btn { font-size: 1em; }
      #quiz-results { font-size: 1em; padding: 15px; }
      .navigation-buttons { flex-wrap: wrap; }
      .navigation-buttons button { width: 100%; }
    }

    @media (max-width: 480px) {
      header, footer { padding: 10px 15px; }
      h1 { font-size: 1.3em; }
      h2 { font-size: 1.2em; margin-bottom: 15px; }
      main { margin: 10px; padding: 15px; border-radius: 8px; }
      nav a { padding: 8px; }
      input[type="text"], button, .option-btn { padding: 8px; font-size: 0.9em; margin: 6px 0; }
      .option-btn { font-size: 0.95em; }
      #question-num { font-size: 1.1em; }
      #explanation { padding: 8px; font-size: 0.9em; }
    }
  </style>
</head>
<body>

  <header>
    <h1>CEE Medico Nepal</h1>
    <nav>
      <a href="/">Home</a>
      <a href="/about.html">About</a>
      <a href="/secure/protected">Premium</a>
      <a href="/secure/login">Login</a>
    </nav>
  </header>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3108357597736981"
     crossorigin="anonymous"></script>
<!-- Horizontal-2 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3108357597736981"
     data-ad-slot="1385667969"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
    <main>  
    <h2>📘 Chapter Quiz Questions</h2>
    <input type="text" id="chapter" placeholder="Enter Chapter Name (e.g., Laws of Motion)" />
    <button id="load-quiz-btn" onclick="loadOrGenerateQuiz()">Load Quiz</button>

    <div id="quiz-container" class="hidden">
      <div id="countdown-timer"></div>
      <div id="question-num"></div>
      <div id="question-text"></div>
      <div id="options-container"></div>
      <p id="explanation"></p>
      <div class="navigation-buttons">
        <button id="previous-button" onclick="previousQuestion()">Previous</button>
        <button id="skip-button" onclick="skipQuestion()">Skip</button>
        <button id="next-button" onclick="nextQuestion()">Next</button>
        <button id="submit-button" class="hidden" onclick="submitQuiz()">Submit Quiz</button>
      </div>
    </div>

    <div id="quiz-results" class="hidden">
      <h3>Quiz Results</h3>
      <p>Total Questions: <span id="total-questions-result"></span></p>
      <p class="score-correct">Correct Answers: <span id="correct-answers-result"></span></p>
      <p class="score-wrong">Wrong Answers: <span id="wrong-answers-result"></span></p>
      <p>Skipped Questions: <span id="skipped-questions-result"></span></p>
      <p>Your Score: <span id="final-score-result"></span> / <span id="max-score-result"></span></p>
      <button onclick="location.reload()">Start New Quiz</button>
    </div>
  </main>

  <footer>
    <p>&copy; 2025 CEE Medico Nepal. All rights reserved.</p>
  </footer>

  <script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js";
    import { getFirestore, doc, getDoc, setDoc, serverTimestamp, collection } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore.js";

    // Your web app's Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyDD5xBrSkX_YXzSnsKxjW8-K6W4rBfV3rg",
      authDomain: "chapter-wise-backup.firebaseapp.com",
      projectId: "chapter-wise-backup",
      storageBucket: "chapter-wise-backup.appspot.com",
      messagingSenderId: "864698641587",
      appId: "1:864698641587:web:d0b550579c6eb7709ed4c6"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    let quizData = [];
    let currentIndex = 0;
    // IMPORTANT: Replace with your actual Gemini API Key
    const GEMINI_API_KEY = "AIzaSyCTG9o5lsyaA8t2O1nYbSaLqjCcVrLMl9c";
    let countdownInterval;

    async function loadOrGenerateQuiz() {
      const chapterInput = document.getElementById("chapter").value.trim();
      if (!chapterInput) {
        alert("Please enter a chapter name.");
        return;
      }
      
      const chapterId = chapterInput.toLowerCase().replace(/\s+/g, '-');
      
      const generateButton = document.getElementById("load-quiz-btn");
      generateButton.innerText = "Loading...";
      generateButton.disabled = true;
      
      try {
        const docRef = doc(db, "quizzes", chapterId);
        const docSnap = await getDoc(docRef);

        if (docSnap.exists()) {
          console.log("✅ Quiz loaded from Firestore cache!");
          const data = docSnap.data();
          // Ensure questions are valid before processing
          if (data && Array.isArray(data.questions)) {
              quizData = data.questions.map(q => ({
                ...q,
                userAnswerIndex: null,
                isAnswered: false,
                isSkipped: false
              }));
          } else {
              throw new Error("Cached data is malformed.");
          }
        } else {
          console.log("ℹ️ No quiz in cache. Generating with API...");
          const newQuiz = await generateQuizFromAPI(chapterInput);
          if (newQuiz && newQuiz.length > 0) {
            quizData = newQuiz;
            await saveQuizToFirestore(chapterId, quizData);
          } else {
             alert("❌ Failed to generate questions from the API. The chapter might be invalid or there was a network issue.");
             return;
          }
        }
        
        currentIndex = 0;
        document.getElementById("quiz-results").classList.add("hidden");
        showQuestion();

      } catch (err) {
        alert("❌ An error occurred: " + err.message);
        console.error("Error loading/generating quiz:", err);
      } finally {
        generateButton.innerText = "Load Quiz";
        generateButton.disabled = false;
      }
    }
    
    // Make the function available globally on the window object
    window.loadOrGenerateQuiz = loadOrGenerateQuiz;

    async function generateQuizFromAPI(chapter) {
      if (chapter.length > 100) {
        alert("Chapter name is too long.");
        return null;
      }

      const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${GEMINI_API_KEY}`;
      const prompt = `
Generate 50 NEET and CEE-Hard and Long level multiple choice questions in JSON format on the chapter "${chapter}" based on NEB and MEC syllabus Nepal. Use this exact format:
[
  {
    "question": "1. Sample question?",
    "options": ["A) Option A", "B) Option B", "C) Option C", "D) Option D"],
    "correct": 1,
    "explanation": "Explanation here."
  }
]
Ensure the output is only the JSON array and nothing else.
`;
      const payload = {
          contents: [{ parts: [{ text: prompt }] }],
          generationConfig: {
              responseMimeType: "application/json",
          }
      };

      try {
        const response = await fetch(apiUrl, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload)
        });

        if (!response.ok) {
            const errorBody = await response.json();
            throw new Error(`API error: ${response.status} - ${errorBody.error.message || 'Unknown error'}`);
        }

        const result = await response.json();
        const rawJson = result.candidates[0].content.parts[0].text;
        
        return JSON.parse(rawJson).map(q => ({
            ...q,
            userAnswerIndex: null, isAnswered: false, isSkipped: false
        }));

      } catch (err) {
        console.error("API generation error:", err);
        alert("API Error: " + err.message);
        return null;
      }
    }
    
    async function saveQuizToFirestore(chapterId, quizContent) {
        try {
            const docRef = doc(db, "quizzes", chapterId);
            await setDoc(docRef, {
                questions: quizContent,
                createdAt: serverTimestamp()
            });
            console.log("✅ Quiz successfully saved to Firestore!");
        } catch (error) {
            console.error("❌ Error saving quiz to Firestore: ", error);
        }
    }

    function startCountdown() {
      let timeLeft = 30;
      const timerDisplay = document.getElementById("countdown-timer");
      timerDisplay.classList.remove("hidden");

      if (countdownInterval) clearInterval(countdownInterval);

      countdownInterval = setInterval(() => {
        timerDisplay.innerText = `Time left: ${timeLeft}s`;
        if (timeLeft <= 0) {
          clearInterval(countdownInterval);
          timerDisplay.innerText = "Time's up!";
          // Auto-skip when time runs out
          if(currentIndex < quizData.length && !quizData[currentIndex].isAnswered) {
              skipQuestion();
          }
        }
        timeLeft--;
      }, 1000);
    }

    function showQuestion() {
      document.getElementById("quiz-results").classList.add("hidden");
      document.getElementById("quiz-container").classList.remove("hidden");

      document.getElementById("previous-button").disabled = currentIndex === 0;
      
      if (currentIndex >= quizData.length -1) {
          document.getElementById("next-button").classList.add("hidden");
          document.getElementById("skip-button").classList.add("hidden");
          document.getElementById("submit-button").classList.remove("hidden");
      } else {
          document.getElementById("next-button").classList.remove("hidden");
          document.getElementById("skip-button").classList.remove("hidden");
          document.getElementById("submit-button").classList.add("hidden");
      }

      if (currentIndex >= quizData.length) {
          submitQuiz();
          return;
      }

      const q = quizData[currentIndex];
      document.getElementById("question-num").innerText = `Question ${currentIndex + 1} of ${quizData.length}`;
      document.getElementById("question-text").innerText = q.question;

      const explanationElement = document.getElementById("explanation");
      explanationElement.innerText = "";
      explanationElement.className = "";

      const optionsBox = document.getElementById("options-container");
      optionsBox.innerHTML = "";

      q.options.forEach((opt, i) => {
        const btn = document.createElement("button");
        btn.innerText = opt;
        btn.className = "option-btn";
        btn.onclick = () => selectOption(i);
        optionsBox.appendChild(btn);
      });

      if (q.isAnswered) {
        highlightAnswer(q.userAnswerIndex, q.correct);
        Array.from(optionsBox.children).forEach(optionBtn => optionBtn.disabled = true);
        const isCorrect = q.userAnswerIndex === q.correct;
        explanationElement.innerText = (isCorrect ? "✅ Correct! " : `❌ Incorrect! Correct: ${q.options[q.correct]}. `) + (q.explanation || "");
        explanationElement.classList.add(isCorrect ? "correct" : "incorrect");
      } else if (q.isSkipped) {
        explanationElement.innerText = "This question was skipped.";
      }
      startCountdown();
    }

    function selectOption(selectedIndex) {
      const q = quizData[currentIndex];
      if (q.isAnswered) return;

      q.isAnswered = true;
      q.userAnswerIndex = selectedIndex;
      q.isSkipped = false;

      highlightAnswer(selectedIndex, q.correct);

      const explanationElement = document.getElementById("explanation");
      const isCorrect = selectedIndex === q.correct;
      explanationElement.innerText = (isCorrect ? "✅ Correct! " : `❌ Incorrect! Correct: ${q.options[q.correct]}. `) + (q.explanation || "");
      explanationElement.classList.add(isCorrect ? "correct" : "incorrect");

      Array.from(document.getElementById("options-container").children).forEach(btn => btn.disabled = true);
      clearInterval(countdownInterval);
    }
    window.selectOption = selectOption;

    function highlightAnswer(selectedIndex, correctIndex) {
      const optionsBox = document.getElementById("options-container");
      if (selectedIndex !== correctIndex) {
        optionsBox.children[selectedIndex].style.backgroundColor = '#ffcdd2';
      }
      optionsBox.children[correctIndex].style.backgroundColor = '#c8e6c9';
    }

    function nextQuestion() {
      if (!quizData[currentIndex].isAnswered && !quizData[currentIndex].isSkipped) {
        quizData[currentIndex].isSkipped = true;
      }
      if (currentIndex < quizData.length) {
        currentIndex++;
        showQuestion();
      }
    }
    window.nextQuestion = nextQuestion;

    function previousQuestion() {
      if (currentIndex > 0) {
        currentIndex--;
        showQuestion();
      }
    }
    window.previousQuestion = previousQuestion;

    function skipQuestion() {
      if (!quizData[currentIndex].isAnswered) {
        quizData[currentIndex].isSkipped = true;
        quizData[currentIndex].userAnswerIndex = null;
      }
      nextQuestion();
    }
    window.skipQuestion = skipQuestion;

    function submitQuiz() {
      clearInterval(countdownInterval);
      document.getElementById("quiz-container").classList.add("hidden");
      document.getElementById("quiz-results").classList.remove("hidden");

      let finalCorrect = 0, finalWrong = 0, finalSkipped = 0;

      quizData.forEach(q => {
        if (q.isAnswered) {
          if (q.userAnswerIndex === q.correct) finalCorrect++;
          else finalWrong++;
        } else {
          finalSkipped++;
        }
      });

      document.getElementById("total-questions-result").innerText = quizData.length;
      document.getElementById("correct-answers-result").innerText = finalCorrect;
      document.getElementById("wrong-answers-result").innerText = finalWrong;
      document.getElementById("skipped-questions-result").innerText = finalSkipped;
      document.getElementById("final-score-result").innerText = finalCorrect;
      document.getElementById("max-score-result").innerText = quizData.length;
    }
    window.submitQuiz = submitQuiz;

  </script>
</body>
</html>
