<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Admin - User Approval Panel</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f9f9f9; }
    h1 { color: #333; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    th, td { padding: 10px; border: 1px solid #ccc; text-align: left; }
    .approved { color: green; font-weight: bold; }
    .pending { color: orange; font-weight: bold; }
  </style>
</head>
<body>

<h1>üõ°Ô∏è Admin Panel: User Approval List</h1>
<table>
  <thead>
    <tr>
      <th>Email</th>
      <th>Approval Status</th>
    </tr>
  </thead>
  <tbody id="userTableBody">
    <!-- User rows will go here -->
  </tbody>
</table>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.8.1/firebase-app.js";
  import {
    getDatabase,
    ref,
    get
  } from "https://www.gstatic.com/firebasejs/11.8.1/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyB66MZa0WZk3WPydcjmCDu7P_CE0FD60ug",
    authDomain: "login-2f07b.firebaseapp.com",
    projectId: "login-2f07b",
    storageBucket: "login-2f07b.appspot.com",
    messagingSenderId: "709252763741",
    appId: "1:709252763741:web:b3902697cc9c8b157a7db4",
    databaseURL: "https://login-2f07b-default-rtdb.asia-southeast1.firebasedatabase.app"
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  const userTableBody = document.getElementById("userTableBody");

  async function fetchUsers() {
    const usersRef = ref(db, "users");
    try {
      const snapshot = await get(usersRef);
      if (snapshot.exists()) {
        const users = snapshot.val();
        userTableBody.innerHTML = ""; // Clear existing
        Object.entries(users).forEach(([uid, user]) => {
          const row = document.createElement("tr");
          row.innerHTML = `
            <td>${user.email || "No email"}</td>
            <td class="${user.isApproved ? 'approved' : 'pending'}">
              ${user.isApproved ? "‚úÖ Approved" : "‚è≥ Pending"}
            </td>
          `;
          userTableBody.appendChild(row);
        });
      } else {
        userTableBody.innerHTML = "<tr><td colspan='2'>No users found</td></tr>";
      }
    } catch (error) {
      console.error("‚ùå Error fetching users:", error);
      userTableBody.innerHTML = "<tr><td colspan='2'>Error loading users</td></tr>";
    }
  }

  fetchUsers();
</script>

</body>
</html>
